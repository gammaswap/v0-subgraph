type User @entity {
  id: ID!
  address: Bytes!
  depositedPools: [Bytes!]!
  loans: [BigInt!]!
}

type Token @entity {
	id: ID! # address of token
	name: String!
	symbol: String!
	decimals: BigInt!
	totalSupply: BigInt!
	totalLiquidity: BigDecimal!
	tradeVolume: BigDecimal!
	lastPriceUSD: BigDecimal
	lastPriceBlock: BigInt # not sure
	txCount: BigInt! # transactions for all pools
}


# pool events
type Pool @entity {
  id: ID!
  address: Bytes!
  cfmm: Bytes!
  protocolId: BigInt!
  implementation: Bytes!
  symbol: String
	name: String
	tokens: [Token!]!
	txCount: Int!
	createdAtTimestamp: BigInt!
	createdAtBlock: BigInt!
  tokenBalances: [BigInt!]!
  count: BigInt!
  blockNumber: BigInt!
  oldAccFeeIndex: BigInt!
  newAccFeeIndex: BigInt!
  lastFeeIndex: BigDecimal!
  suppliedLiquidity: BigInt!
  borrowedLiquidity: BigInt!
  totalCollateral: BigInt!
}

type PoolSnapshot @entity {
  id: ID!
  address: Bytes! # address
  lpTokenBalance: BigInt!
  lpTokenBorrowed: BigInt!
  lpTokenBorrowedPlusInterest: BigInt!
  lpTokenTotal: BigInt!
  lpInvariant: BigInt!
  borrowedInvariant: BigInt!
  lpTotalInvariant: BigInt!
  lpUtilizationRate: BigDecimal!
  suppliedLiquidity: BigInt!
  borrowedLiquidity: BigInt!
  lastBlockNumber: BigInt!
  blockNumber: BigInt!
  price: BigInt!
  totalCollateral: BigInt!
}

type Loan @entity {
  id: ID!
  pool: Pool! # address of pool corresponds to id of Pool entity
  tokenId: BigInt!
  tokensHeld: [BigInt!]!
  liquidity: BigInt!
  lpTokens: BigInt!
  rateIndex: BigInt! # accFeeIndex
  collateral: BigInt!
  loanToValue: BigDecimal!
  blockNumber: BigInt!
}

type LoanData @entity {
  id: ID!
  pool: Pool! # address of pool corresponds to id of Pool entity
  tokenId: BigInt!
  tokensHeld: [BigInt!]!
  liquidity: BigInt!
  lpTokens: BigInt!
  rateIndex: BigInt! # accFeeIndex
  collateral: BigInt!
  loanToValue: BigDecimal!
  blockNumber: BigInt!
}

type GSFactory @entity {
  id: ID!
  totalSupplied: BigInt!
  totalBorrowed: BigInt!
  totalCollateral: BigInt!
}
