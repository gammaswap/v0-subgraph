type User @entity {
  id: ID!
  address: Bytes!
  depositedPools: [Bytes!]!
  loans: [BigInt!]!
}

# pool events
type Pool @entity {
  id: ID!
  address: Bytes! # address
  cfmm: Bytes! # address
  protocolId: BigInt!
  protocol: Bytes! # address
  count: BigInt!
  tokenBalances: [BigInt!]!
  lpTokenBalance: BigInt!
  lpTokenBorrowed: BigInt!
  lpTokenBorrowedPlusInterest: BigInt!
  lpTokenTotal: BigInt!
  
  borrowRate: BigInt!
  accFeeIndex: BigInt!
  
  lastFeeIndex: BigInt!
  lastCFMMFeeIndex: BigInt!
  lastCFMMInvariant: BigInt!
  lastCFMMTotalSupply: BigInt!
  lastBlockNumber: BigInt!
  
  totalSupply: BigInt!
}

type PoolData @entity {
  id: ID!
  address: Bytes! # address
  cfmm: Bytes! # address
  protocolId: BigInt!
  protocol: Bytes! # address
  count: BigInt!
  tokenBalance: [BigInt!]!
  lpTokenBalance: BigInt!
  lpTokenBorrowed: BigInt!
  lpTokensBorrowedPlusInterest: BigInt!
  lpTokensTotal: BigInt!
  
  borrowRate: BigInt!
  accFeeIndex: BigInt!
  
  lastFeeIndex: BigInt!
  lastCFMMFeeIndex: BigInt!
  lastCFMMInvariant: BigInt!
  lastCFMMTotalSupply: BigInt!
  lastBlockNumber: BigInt!
  
  totalSupply: BigInt!  
}

type Loan @entity {
  id: ID!
  poolId: Bytes!
  tokensHeld: [BigInt!]!
  heldLiquidity: BigInt!
  liquidity: BigInt!
  lpTokens: BigInt!
  rateIndex: BigInt! # accFeeIndex
  blockNumber: BigInt!
}

type LoanData @entity {
  id: ID!
  poolId: Bytes!
  tokensHeld: [BigInt!]!
  heldLiquidity: BigInt!
  liquidity: BigInt!
  lpTokens: BigInt!
  rateIndex: BigInt! # accFeeIndex
  blockNumber: BigInt!
}
